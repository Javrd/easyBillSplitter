import{b as Y}from"./chunk-OAP6QBV6.js";import{A as H,E as N,G as O,H as j,M as z,N as R,R as W,S as G,U as J,W as K,X,k as V,l as B,m as $,t as L,v as Q,w as q,x as A,z as D}from"./chunk-MM6CRWK5.js";import{$a as _,Aa as f,Ma as x,Na as g,Ob as P,Pa as C,Qa as E,Sa as y,Ta as F,Ua as r,Va as s,Wa as p,_ as v,_a as b,ab as u,db as w,fb as k,gb as M,hb as U,ia as d,ib as S,ja as m,jb as I,qb as T,za as c}from"./chunk-DPZDZGEI.js";import"./chunk-HYK4U74Y.js";import"./chunk-JVFFMWOY.js";import"./chunk-GI7IJE5M.js";import"./chunk-CIS7OW2H.js";import"./chunk-G3CV3VGG.js";import"./chunk-ZSXYZYSQ.js";import"./chunk-5MPL5A3U.js";import"./chunk-NKT2XMZU.js";import"./chunk-4U6PRYVA.js";import"./chunk-GN6S5PAX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{i as h}from"./chunk-OYAVQN5W.js";var ee=["input"];function te(o,n){if(o&1){let a=b();r(0,"button",10),_("click",function(){d(a);let t=u().$index,i=u();return m(i.removeUser(t))}),p(1,"ion-icon",11),s()}}function ie(o,n){if(o&1){let a=b();r(0,"ion-item")(1,"ion-input",8,0),_("ngModelChange",function(t){let i=d(a).$index,l=S(3),Z=u();return m(Z.onInputChange(t,i,l))})("change",function(){d(a);let t=u();return m(t.focusLast())}),x(4,te,2,0,"button",9),s()()}if(o&2){let a=n.$implicit,e=n.$index;c(),w("id","input-",e,""),g("ngModel",a.name),c(3),C(a.name?4:-1)}}var _e=(()=>{let n=class n{constructor(e,t){this.storage=e,this.location=t,this.users=[],this.errors=!1,J({checkmarkOutline:K,closeOutline:X})}ionViewWillEnter(){return h(this,null,function*(){this.users=yield this.storage.getUsers(),this.users.push({name:""})})}onInputChange(e,t,i){return h(this,null,function*(){this.errors=!1,this.users[t]={name:e},this.addEmptyBox(),e?this.users.filter(l=>l.name.trim()===e.trim()).length>1&&(i.control.setErrors({}),this.errors=!0):this.removeUser(t)})}removeUser(e){this.users.splice(e,1)}focusLast(){this.inputs.last.setFocus()}goHome(){this.saveChanges(),this.location.back()}addEmptyBox(){let e=this.users.length-1;this.users[e].name!=""&&this.users.push({name:""})}saveChanges(){this.users.forEach(e=>e.name=e.name.trim()),this.storage.saveUsers(this.users.filter(e=>!!e.name))}};n.\u0275fac=function(t){return new(t||n)(f(Y),f(P))},n.\u0275cmp=v({type:n,selectors:[["app-edit-users"]],viewQuery:function(t,i){if(t&1&&k(ee,5),t&2){let l;M(l=U())&&(i.inputs=l)}},standalone:!0,features:[T],decls:17,vars:1,consts:[["input","","form","ngModel"],["slot","start"],[1,"ion-padding"],[1,"list"],["lines","none"],["slot","fixed","horizontal","center","vertical","bottom"],[3,"click","disabled"],["name","checkmark-outline"],["placeholder","Participante","errorText","Los nombres de los participantes deben ser \xFAnicos",3,"ngModelChange","change","ngModel","id"],["type","button","slot","end","aria-label","reset",1,"input-clear-icon","sc-ion-input-ios"],["type","button","slot","end","aria-label","reset",1,"input-clear-icon","sc-ion-input-ios",3,"click"],["slot","icon-only","name","close-outline","aria-hidden","true"]],template:function(t,i){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),p(3,"ion-menu-button"),s(),r(4,"ion-title"),I(5,"A\xF1adir Participantes"),s()(),r(6,"ion-toolbar")(7,"ion-note"),I(8," A\xF1ade, edita o elimina tu lista de participantes. M\xE1s tarde podr\xE1s seleccionar cuales quieres que aparezcan en tu pr\xF3ximo ticket. "),s()()(),r(9,"ion-content",2)(10,"div",3)(11,"ion-list",4),y(12,ie,5,4,"ion-item",null,E),s()()(),r(14,"ion-fab",5)(15,"ion-fab-button",6),_("click",function(){return i.goHome()}),p(16,"ion-icon",7),s()()),t&2&&(c(12),F(i.users),c(3),g("disabled",i.users.length===1||i.errors))},dependencies:[O,D,R,L,z,j,Q,$,V,B,q,A,W,H,N,G],styles:["ion-content[_ngcontent-%COMP%]::part(scroll){--offset-bottom: calc((var(--app-button-height) / 2 + var(--app-button-padding)) * -1)}"]});let o=n;return o})();export{_e as EditUsersPage};
