import{a as fe}from"./chunk-BNPVTZVY.js";import{a as me}from"./chunk-DBYLPBXF.js";import"./chunk-6BZCFKK7.js";import{G as oe,H as ae,M as se,N as ce,R as le,U as de,V as ue,f as N,t as ee,v as te,w as re,x as ne,z as ie}from"./chunk-MM6CRWK5.js";import{$a as Y,Aa as $,Ua as O,Va as _,Wa as j,_ as X,jb as B,qb as Z}from"./chunk-DPZDZGEI.js";import"./chunk-HYK4U74Y.js";import"./chunk-JVFFMWOY.js";import"./chunk-GI7IJE5M.js";import"./chunk-CIS7OW2H.js";import"./chunk-G3CV3VGG.js";import"./chunk-ZSXYZYSQ.js";import"./chunk-5MPL5A3U.js";import"./chunk-NKT2XMZU.js";import"./chunk-4U6PRYVA.js";import"./chunk-GN6S5PAX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{i as c}from"./chunk-OYAVQN5W.js";var _e=i=>{let e=new Map;e.set("web",{name:"web"});let r=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(o,s)=>{r.platforms.set(o,s)},t=o=>{r.platforms.has(o)&&(r.currentPlatform=r.platforms.get(o))};return r.addPlatform=n,r.setPlatform=t,r},Ie=i=>i.CapacitorPlatforms=_e(i),ge=Ie(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Me=ge.addPlatform,He=ge.setPlatform;var I=function(i){return i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE",i}(I||{}),w=class extends Error{constructor(e,r,n){super(e),this.message=e,this.code=r,this.data=n}},Ae=i=>{var e,r;return i!=null&&i.androidBridge?"android":!((r=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},Se=i=>{var e,r,n,t,o;let s=i.CapacitorCustomPlatform||null,a=i.Capacitor||{},d=a.Plugins=a.Plugins||{},l=i.CapacitorPlatforms,L=()=>s!==null?s.name:Ae(i),C=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||L,H=()=>C()!=="web",we=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||H,ve=u=>{let m=W.get(u);return!!(m!=null&&m.platforms.has(C())||V(u))},Pe=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||ve,ye=u=>{var m;return(m=a.PluginHeaders)===null||m===void 0?void 0:m.find(x=>x.name===u)},V=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPluginHeader)||ye,Ee=u=>i.console.error(u),Le=(u,m,x)=>Promise.reject(`${x} does not have an implementation of "${m}".`),W=new Map,Ce=(u,m={})=>{let x=W.get(u);if(x)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),x.proxy;let E=C(),U=V(u),b,Ue=()=>c(void 0,null,function*(){return!b&&E in m?b=typeof m[E]=="function"?b=yield m[E]():b=m[E]:s!==null&&!b&&"web"in m&&(b=typeof m.web=="function"?b=yield m.web():b=m.web),b}),ke=(f,p)=>{var g,v;if(U){let P=U==null?void 0:U.methods.find(h=>p===h.name);if(P)return P.rtype==="promise"?h=>a.nativePromise(u,p.toString(),h):(h,R)=>a.nativeCallback(u,p.toString(),h,R);if(f)return(g=f[p])===null||g===void 0?void 0:g.bind(f)}else{if(f)return(v=f[p])===null||v===void 0?void 0:v.bind(f);throw new w(`"${u}" plugin is not implemented on ${E}`,I.Unimplemented)}},D=f=>{let p,g=(...v)=>{let P=Ue().then(h=>{let R=ke(h,f);if(R){let T=R(...v);return p=T==null?void 0:T.remove,T}else throw new w(`"${u}.${f}()" is not implemented on ${E}`,I.Unimplemented)});return f==="addListener"&&(P.remove=()=>c(void 0,null,function*(){return p()})),P};return g.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:f,writable:!1,configurable:!1}),g},J=D("addListener"),Q=D("removeListener"),Oe=(f,p)=>{let g=J({eventName:f},p),v=()=>c(void 0,null,function*(){let h=yield g;Q({eventName:f,callbackId:h},p)}),P=new Promise(h=>g.then(()=>h({remove:v})));return P.remove=()=>c(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield v()}),P},q=new Proxy({},{get(f,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?Oe:J;case"removeListener":return Q;default:return D(p)}}});return d[u]=q,W.set(u,{name:u,proxy:q,platforms:new Set([...Object.keys(m),...U?[E]:[]])}),q},xe=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||Ce;return a.convertFileSrc||(a.convertFileSrc=u=>u),a.getPlatform=C,a.handleError=Ee,a.isNativePlatform=we,a.isPluginAvailable=Pe,a.pluginMethodNoop=Le,a.registerPlugin=xe,a.Exception=w,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},Re=i=>i.Capacitor=Se(i),F=Re(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),M=F.registerPlugin,We=F.Plugins;var k=class{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,r){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(r);let o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);let s=()=>c(this,null,function*(){return this.removeListener(e,r)});return Promise.resolve({remove:s})}removeAllListeners(){return c(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,r,n){let t=this.listeners[e];if(!t){if(n){let o=this.retainedEventArguments[e];o||(o=[]),o.push(r),this.retainedEventArguments[e]=o}return}t.forEach(o=>o(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(e="not implemented"){return new F.Exception(e,I.Unimplemented)}unavailable(e="not available"){return new F.Exception(e,I.Unavailable)}removeListener(e,r){return c(this,null,function*(){let n=this.listeners[e];if(!n)return;let t=n.indexOf(r);this.listeners[e].splice(t,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(n=>{this.notifyListeners(e,n)}))}};var pe=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),he=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),G=class extends k{getCookies(){return c(this,null,function*(){let e=document.cookie,r={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[t,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=he(t).trim(),o=he(o).trim(),r[t]=o}),r})}setCookie(e){return c(this,null,function*(){try{let r=pe(e.key),n=pe(e.value),t=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${n||""}${t}; path=${o}; ${s};`}catch(r){return Promise.reject(r)}})}deleteCookie(e){return c(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})}clearCookies(){return c(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return c(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},De=M("CapacitorCookies",{web:()=>new G}),Te=i=>c(void 0,null,function*(){return new Promise((e,r)=>{let n=new FileReader;n.onload=()=>{let t=n.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)},n.onerror=t=>r(t),n.readAsDataURL(i)})}),$e=(i={})=>{let e=Object.keys(i);return Object.keys(i).map(t=>t.toLocaleLowerCase()).reduce((t,o,s)=>(t[o]=i[e[s]],t),{})},je=(i,e=!0)=>i?Object.entries(i).reduce((n,t)=>{let[o,s]=t,a,d;return Array.isArray(s)?(d="",s.forEach(l=>{a=e?encodeURIComponent(l):l,d+=`${o}=${a}&`}),d.slice(0,-1)):(a=e?encodeURIComponent(s):s,d=`${o}=${a}`),`${n}&${d}`},"").substr(1):null,Fe=(i,e={})=>{let r=Object.assign({method:i.method||"GET",headers:i.headers},e),t=$e(i.headers)["content-type"]||"";if(typeof i.data=="string")r.body=i.data;else if(t.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[s,a]of Object.entries(i.data||{}))o.set(s,a);r.body=o.toString()}else if(t.includes("multipart/form-data")||i.data instanceof FormData){let o=new FormData;if(i.data instanceof FormData)i.data.forEach((a,d)=>{o.append(d,a)});else for(let a of Object.keys(i.data))o.append(a,i.data[a]);r.body=o;let s=new Headers(r.headers);s.delete("content-type"),r.headers=s}else(t.includes("application/json")||typeof i.data=="object")&&(r.body=JSON.stringify(i.data));return r},z=class extends k{request(e){return c(this,null,function*(){let r=Fe(e,e.webFetchExtra),n=je(e.params,e.shouldEncodeUrlParams),t=n?`${e.url}?${n}`:e.url,o=yield fetch(t,r),s=o.headers.get("content-type")||"",{responseType:a="text"}=o.ok?e:{};s.includes("application/json")&&(a="json");let d,l;switch(a){case"arraybuffer":case"blob":l=yield o.blob(),d=yield Te(l);break;case"json":d=yield o.json();break;case"document":case"text":default:d=yield o.text()}let L={};return o.headers.forEach((C,H)=>{L[H]=C}),{data:d,headers:L,status:o.status,url:o.url}})}get(e){return c(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return c(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return c(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return c(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return c(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},qe=M("CapacitorHttp",{web:()=>new z});var y=function(i){return i.Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",i}(y||{}),A=function(i){return i.Rear="REAR",i.Front="FRONT",i}(A||{}),K=function(i){return i.Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",i}(K||{});var S=class extends k{getPhoto(e){return c(this,null,function*(){return new Promise((r,n)=>c(this,null,function*(){if(e.webUseInput||e.source===y.Photos)this.fileInputExperience(e,r,n);else if(e.source===y.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",o=>c(this,null,function*(){o.detail===0?this.fileInputExperience(e,r,n):this.cameraExperience(e,r,n)}))}else this.cameraExperience(e,r,n)}))})}pickImages(e){return c(this,null,function*(){return new Promise((r,n)=>c(this,null,function*(){this.multipleFileInputExperience(r,n)}))})}cameraExperience(e,r,n){return c(this,null,function*(){if(customElements.get("pwa-camera-modal")){let t=document.createElement("pwa-camera-modal");t.facingMode=e.direction===A.Front?"user":"environment",document.body.appendChild(t);try{yield t.componentOnReady(),t.addEventListener("onPhoto",o=>c(this,null,function*(){let s=o.detail;s===null?n(new w("User cancelled photos app")):s instanceof Error?n(s):r(yield this._getCameraPhoto(s,e)),t.dismiss(),document.body.removeChild(t)})),t.present()}catch{this.fileInputExperience(e,r,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,r,n)})}fileInputExperience(e,r,n){let t=document.querySelector("#_capacitor-camera-input"),o=()=>{var s;(s=t.parentNode)===null||s===void 0||s.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",s=>{let a=t.files[0],d="jpeg";if(a.type==="image/png"?d="png":a.type==="image/gif"&&(d="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){let l=new FileReader;l.addEventListener("load",()=>{if(e.resultType==="dataUrl")r({dataUrl:l.result,format:d});else if(e.resultType==="base64"){let L=l.result.split(",")[1];r({base64String:L,format:d})}o()}),l.readAsDataURL(a)}else r({webPath:URL.createObjectURL(a),format:d}),o()}),t.addEventListener("cancel",s=>{n(new w("User cancelled photos app")),o()})),t.accept="image/*",t.capture=!0,e.source===y.Photos||e.source===y.Prompt?t.removeAttribute("capture"):e.direction===A.Front?t.capture="user":e.direction===A.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(e,r){let n=document.querySelector("#_capacitor-camera-input-multiple"),t=()=>{var o;(o=n.parentNode)===null||o===void 0||o.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",o=>{let s=[];for(let a=0;a<n.files.length;a++){let d=n.files[a],l="jpeg";d.type==="image/png"?l="png":d.type==="image/gif"&&(l="gif"),s.push({webPath:URL.createObjectURL(d),format:l})}e({photos:s}),t()}),n.addEventListener("cancel",o=>{r(new w("User cancelled photos app")),t()})),n.accept="image/*",n.click()}_getCameraPhoto(e,r){return new Promise((n,t)=>{let o=new FileReader,s=e.type.split("/")[1];r.resultType==="uri"?n({webPath:URL.createObjectURL(e),format:s,saved:!1}):(o.readAsDataURL(e),o.onloadend=()=>{let a=o.result;r.resultType==="dataUrl"?n({dataUrl:a,format:s,saved:!1}):n({base64String:a.split(",")[1],format:s,saved:!1})},o.onerror=a=>{t(a)})})}checkPermissions(){return c(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return c(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return c(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return c(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},Je=new S;var be=M("Camera",{web:()=>new S});var lt=(()=>{let e=class e{constructor(n,t,o){this.router=n,this.currentTicket=t,this.storageService=o,de({camera:ue})}ionViewWillEnter(){return c(this,null,function*(){(yield this.storageService.getUsers()).length===0&&this.router.navigateByUrl("/edit-users")})}takePhoto(){return c(this,null,function*(){this.currentTicket.image=yield be.getPhoto({source:y.Camera,resultType:K.Uri,correctOrientation:!1,width:2*window.innerWidth}),this.router.navigate(["/show-picture"])})}};e.\u0275fac=function(t){return new(t||e)($(N),$(me),$(fe))},e.\u0275cmp=X({type:e,selectors:[["app-home"]],standalone:!0,features:[Z],decls:13,vars:0,consts:[["slot","start"],["slot","fixed","horizontal","center","vertical","center"],[3,"click"],["name","camera"]],template:function(t,o){t&1&&(O(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),j(3,"ion-menu-button"),_(),O(4,"ion-title"),B(5,"Nuevo ticket"),_()(),O(6,"ion-toolbar")(7,"ion-note"),B(8,"Empieza haciendo o subiendo una foto."),_()()(),j(9,"ion-content"),O(10,"ion-fab",1)(11,"ion-fab-button",2),Y("click",function(){return o.takePhoto()}),j(12,"ion-icon",3),_()())},dependencies:[te,ee,re,ne,ie,le,oe,ae,se,ce],styles:["ion-fab-button[_ngcontent-%COMP%]{width:256px;height:256px}ion-icon[_ngcontent-%COMP%]{font-size:128px}"]});let i=e;return i})();export{lt as HomePage};
